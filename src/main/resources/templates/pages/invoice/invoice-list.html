<table class="table">
    <tr>
        <th>Client</th>
        <th>Status</th>
        <th>Creation</th>
        <th>Total</th>
        <th>Remise</th>
        <th>Actions</th>
    </tr>
    <tr th:each="invoice : ${invoices}">
        <td th:text="${invoice.clientName}"></td>
        <td th:text="${invoice.status}"></td>
        <td th:text="${invoice.createdAt}"></td>
        <td th:text="${#numbers.formatDecimal(invoice.totalPrice, 1, 2)}"></td>
        <td>
            <span th:if="${invoice.tauxremise} != null" 
                  th:text="${invoice.tauxremise} + '%'"
                  class="text-success"></span>
            <span th:if="${invoice.tauxremise} == null" 
                  class="text-muted">Aucune remise</span>
        </td>
        <td>
            <form th:action="@{/invoices/apply-discount/{id}(id=${invoice.externalId})}" 
                  th:if="${invoice.tauxremise} == null"
                  method="post">
                <button type="submit" class="btn btn-sm btn-outline-primary">
                    Appliquer remise
                </button>
            </form>
            
            <form th:action="@{/invoices/remove-discount/{id}(id=${invoice.externalId})}" 
                  th:unless="${invoice.tauxremise} == null"
                  method="post">
                <button type="submit" class="btn btn-sm btn-outline-danger">
                    Supprimer remise
                </button>
            </form>
        </td>
    </tr>
</table>